File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask_sqlalchemy/extension.py", line 690, in engines
raise RuntimeError(
RuntimeError: The current Flask app is not registered with this 'SQLAlchemy' instance. Did you forget to call 'init_app', or did you create multiple 'SQLAlchemy' instances?

L1

most1382007
Assistant
just now
The error message indicates that the SQLAlchemy instance is not correctly initialized with your Flask app. This typically happens if SQLAlchemy() is being instantiated multiple times or init_app(app) is not being called.

Looking at the code snippets available, it seems like SQLAlchemy() is being created in app.py, and the db instance should be imported and initialized with app in main.py. Make sure that the db.init_app(app) is called before any routes or extensions that require the database.

Ensure your main.py and app.py files are structured correctly:

Make sure that db.init_app(app) is called after app is created in app.py.
In main.py, remove any additional instances of SQLAlchemy().
Proper initialization will look like this:

In app.py:

from flask import Flask
from flask_sqlalchemy import SQLAlchemy
from sqlalchemy.orm import DeclarativeBase
import logging
# Configure logging
logging.basicConfig(level=logging.INFO)
# Create Flask-SQLAlchemy database instance
class Base(DeclarativeBase):
    pass
db = SQLAlchemy(model_class=Base)
app = Flask(__name__)
# Initialize SQLAlchemy with app instance
db.init_app(app)
# Log that we're using this file
logging.info("Using app.py for application configuration")
In main.py:

import os
from app import app, db
import logging
# Your existing configuration and initialization code
# Initialize your app context-related operations
with app.app_context():
    # Ensure models are registered and database is set up
    import models 
    db.create_all()  
    # Your existing setup logic
Verify that only one instance of SQLAlchemy() is created in your app, and ensure db.init_app(app) is properly placed in app.py after app creation and importation of models. This should fix the SQLAlchemy initialization error. If you make changes, ensure you apply them to your files before re-running your application.